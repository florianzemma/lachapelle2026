@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: #fafaf8;
    --foreground: #2f2f2f;
    --primary: rgb(28 61 44);
    --primary-light: #6fa98a;
    --secondary: rgb(231 221 202 / 0.4);
    --secondary-hover: #e7ddca80;
    --logo-blue: #3b6188;
    --logo-green: #7c9f6b;
    --muted: #6b7280;
    --border: #e5e7eb;
  }

  html {
    scroll-padding-top: 5rem;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: var(--font-inter);
    font-feature-settings: "cv11", "ss01";
    font-variation-settings: "opsz" auto;
  }

  /* Lenis smooth scroll */
  html.lenis,
  html.lenis body {
    height: auto;
  }

  .lenis.lenis-smooth {
    scroll-behavior: auto !important;
  }

  .lenis.lenis-smooth [data-lenis-prevent] {
    overscroll-behavior: contain;
  }

  .lenis.lenis-stopped {
    overflow: hidden;
  }

  .lenis.lenis-scrolling iframe {
    pointer-events: none;
  }
}

@layer components {
  /* Prismic content normalization */
  .prismic-content > *:first-child {
    @apply mt-0;
  }

  .prismic-content > *:last-child {
    @apply mb-0;
  }

  .prismic-content p {
    @apply m-0;
  }

  .prismic-content ul {
    @apply mb-4 ml-6 mt-4 list-disc;
  }

  .prismic-content ol {
    @apply mb-4 ml-6 mt-4 list-decimal;
  }

  .prismic-content li {
    @apply mb-2;
  }

  /* Bilan cards specific - Compact prose */
  .prismic-content.prose-sm ul,
  .prismic-content.prose-sm ol {
    @apply mb-0 ml-0 mt-3 pl-5;
  }

  .prismic-content.prose-sm li {
    @apply mb-1.5 pl-1 leading-normal;
  }

  .prismic-content.prose-sm li:last-child {
    @apply mb-0;
  }

  .prismic-content.prose-sm p + ul,
  .prismic-content.prose-sm p + ol {
    @apply mt-2;
  }

  /* Hero section styles */
  .hero-title * {
    @apply text-balance font-heading text-3xl font-bold tracking-tight text-white sm:text-4xl md:text-5xl lg:text-6xl;
  }

  .hero-description * {
    @apply mt-6 text-balance text-lg leading-7 text-white sm:text-xl md:text-2xl;
  }

  /* Masonry grid layout - Cannot be done with Tailwind alone */
  .bilan-masonry-grid {
    display: grid;
    grid-auto-rows: 20px;
    align-items: start;
    @apply gap-6;
  }

  @media (min-width: 640px) {
    .bilan-masonry-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .bilan-masonry-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  .bilan-masonry-item {
    grid-row-end: span var(--row-span);
  }

  /* Fallback: CSS columns for older browsers */
  @supports not (display: grid) {
    .bilan-masonry-grid {
      @apply gap-0;
      column-count: 1;
      column-gap: 1.5rem;
    }

    @media (min-width: 640px) {
      .bilan-masonry-grid {
        column-count: 2;
      }
    }

    @media (min-width: 1024px) {
      .bilan-masonry-grid {
        column-count: 3;
      }
    }

    .bilan-masonry-item {
      break-inside: avoid;
      @apply mb-6;
    }
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}
